{"ast":null,"code":"// axios module import\nimport \"@uppy/core/dist/style.css\";\nimport Uppy from \"@uppy/core\";\nimport XHRUpload from \"@uppy/xhr-upload\";\nexport default {\n  name: \"Hello\",\n  components: {},\n  data() {\n    return {\n      selectFile: null,\n      // 파일 객체\n      isUploading: false,\n      // 파일 업로드 체크\n      response: null // 파일 업로드후 응답값\n    };\n  },\n\n  methods: {\n    previewFile() {\n      // 선택된 파일이 있는가?\n      if (0 < this.$refs.selectFile.files.length) {\n        // 0 번째 파일을 가져 온다.\n        this.selectFile = this.$refs.selectFile.files[0];\n        // 마지막 . 위치를 찾고 + 1 하여 확장자 명을 가져온다.\n        let fileExt = this.selectFile.name.substring(this.selectFile.name.lastIndexOf(\".\") + 1);\n        // 소문자로 변환\n        fileExt = fileExt.toLowerCase();\n        // 이미지 확장자 체크, 1메가 바이트 이하 인지 체크\n        if ([\"jpeg\", \"png\", \"gif\", \"bmp\", \"pdf\"].includes(fileExt) && this.selectFile.size <= 9048576) {\n          // FileReader 를 활용하여 파일을 읽는다\n          var reader = new FileReader();\n          reader.onload = e => {\n            // base64\n            this.previewImgUrl = e.target.result;\n          };\n          reader.readAsDataURL(this.selectFile);\n        } else if (this.selectFile.size <= 9048576) {\n          // 이미지외 파일\n          this.previewImgUrl = null;\n        } else {\n          alert(\"파일을 다시 선택해 주세요.\");\n          this.selectFile = null;\n          this.previewImgUrl = null;\n        }\n      } else {\n        // 파일을 선택하지 않았을때\n        this.selectFile = null;\n        this.previewImgUrl = null;\n      }\n      console.log(this.selectFile);\n    },\n    async formSubmit() {\n      if (this.selectFile) {\n        // Form 필드 생성\n        //let form = new FormData()\n        //form.append(\"file\", this.selectFile) // api file name\n        //this.isUploading = true\n\n        http.post(\"http://10.1.30.202:5000/upload\").then(res => {\n          this.response = res.data;\n          this.isUploading = false;\n        }).catch(error => {\n          this.response = error;\n          this.isUploading = false;\n        });\n      } else {\n        alert(\"파일을 선택해 주세요.\");\n      }\n      return true;\n    }\n  }\n};","map":{"version":3,"mappings":"AAeE;AACA,OAAO,2BAA2B;AAClC,OAAOA,IAAG,MAAO,YAAY;AAC7B,OAAOC,SAAQ,MAAO,kBAAkB;AAExC,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,UAAU,EAAE,CAAC,CAAC;EACdC,IAAI,GAAG;IACL,OAAO;MACLC,UAAU,EAAE,IAAI;MAAE;MAClBC,WAAW,EAAE,KAAK;MAAE;MACpBC,QAAQ,EAAE,IAAI,CAAE;IAClB;EACF,CAAC;;EACDC,OAAO,EAAE;IACPC,WAAW,GAAG;MACZ;MACA,IAAI,IAAI,IAAI,CAACC,KAAK,CAACL,UAAU,CAACM,KAAK,CAACC,MAAM,EAAE;QAC1C;QACA,IAAI,CAACP,UAAS,GAAI,IAAI,CAACK,KAAK,CAACL,UAAU,CAACM,KAAK,CAAC,CAAC;QAC/C;QACA,IAAIE,OAAM,GAAI,IAAI,CAACR,UAAU,CAACH,IAAI,CAACY,SAAS,CAC1C,IAAI,CAACT,UAAU,CAACH,IAAI,CAACa,WAAW,CAAC,GAAG,IAAI,EAC1C;QACA;QACAF,OAAM,GAAIA,OAAO,CAACG,WAAW,EAAC;QAC9B;QACA,IACE,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAACC,QAAQ,CAACJ,OAAO,KACrD,IAAI,CAACR,UAAU,CAACa,IAAG,IAAK,OAAM,EAC9B;UACA;UACA,IAAIC,MAAK,GAAI,IAAIC,UAAU,EAAC;UAC5BD,MAAM,CAACE,MAAK,GAAIC,KAAK;YACnB;YACA,IAAI,CAACC,aAAY,GAAID,CAAC,CAACE,MAAM,CAACC,MAAK;UACrC;UACAN,MAAM,CAACO,aAAa,CAAC,IAAI,CAACrB,UAAU;QACtC,OAAO,IAAI,IAAI,CAACA,UAAU,CAACa,IAAG,IAAK,OAAO,EAAE;UAC1C;UACA,IAAI,CAACK,aAAY,GAAI,IAAG;QAC1B,OAAO;UACLI,KAAK,CAAC,iBAAiB;UACvB,IAAI,CAACtB,UAAS,GAAI,IAAG;UACrB,IAAI,CAACkB,aAAY,GAAI,IAAG;QAC1B;MACF,OAAO;QACL;QACA,IAAI,CAAClB,UAAS,GAAI,IAAG;QACrB,IAAI,CAACkB,aAAY,GAAI,IAAG;MAC1B;MACAK,OAAO,CAACC,GAAG,CAAC,IAAI,CAACxB,UAAU;IAC7B,CAAC;IAED,MAAMyB,UAAU,GAAG;MACjB,IAAI,IAAI,CAACzB,UAAU,EAAE;QACnB;QACA;QACA;QACA;;QAEA0B,IAAG,CACAC,IAAI,CAAC,gCAAgC,EACrCC,IAAI,CAAEC,GAAG,IAAK;UACb,IAAI,CAAC3B,QAAO,GAAI2B,GAAG,CAAC9B,IAAG;UACvB,IAAI,CAACE,WAAU,GAAI,KAAI;QACzB,CAAC,EACA6B,KAAK,CAAEC,KAAK,IAAK;UAChB,IAAI,CAAC7B,QAAO,GAAI6B,KAAI;UACpB,IAAI,CAAC9B,WAAU,GAAI,KAAI;QACzB,CAAC;MACL,OAAO;QACLqB,KAAK,CAAC,cAAc;MACtB;MAEA,OAAO,IAAG;IACZ;EACF;AACF","names":["Uppy","XHRUpload","name","components","data","selectFile","isUploading","response","methods","previewFile","$refs","files","length","fileExt","substring","lastIndexOf","toLowerCase","includes","size","reader","FileReader","onload","e","previewImgUrl","target","result","readAsDataURL","alert","console","log","formSubmit","http","post","then","res","catch","error"],"sourceRoot":"","sources":["/lab/src/components/HelloWorld.vue"],"sourcesContent":["<template>\n  <div class=\"file-upload\">\n    <form @submit.prevent=\"formSubmit\" method=\"post\">\n      <input type=\"file\" />\n      <button type=\"submit\" :disabled=\"isUploading\">Upload</button>\n\n      <div>\n        <hr />\n        response : {{ response }}\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\n  // axios module import\n  import \"@uppy/core/dist/style.css\";\n  import Uppy from \"@uppy/core\";\n  import XHRUpload from \"@uppy/xhr-upload\";\n\n  export default {\n    name: \"Hello\",\n    components: {},\n    data() {\n      return {\n        selectFile: null, // 파일 객체\n        isUploading: false, // 파일 업로드 체크\n        response: null, // 파일 업로드후 응답값\n      }\n    },\n    methods: {\n      previewFile() {\n        // 선택된 파일이 있는가?\n        if (0 < this.$refs.selectFile.files.length) {\n          // 0 번째 파일을 가져 온다.\n          this.selectFile = this.$refs.selectFile.files[0]\n          // 마지막 . 위치를 찾고 + 1 하여 확장자 명을 가져온다.\n          let fileExt = this.selectFile.name.substring(\n            this.selectFile.name.lastIndexOf(\".\") + 1\n          )\n          // 소문자로 변환\n          fileExt = fileExt.toLowerCase()\n          // 이미지 확장자 체크, 1메가 바이트 이하 인지 체크\n          if (\n            [\"jpeg\", \"png\", \"gif\", \"bmp\", \"pdf\"].includes(fileExt) &&\n            this.selectFile.size <= 9048576\n          ) {\n            // FileReader 를 활용하여 파일을 읽는다\n            var reader = new FileReader()\n            reader.onload = e => {\n              // base64\n              this.previewImgUrl = e.target.result\n            }\n            reader.readAsDataURL(this.selectFile)\n          } else if (this.selectFile.size <= 9048576) {\n            // 이미지외 파일\n            this.previewImgUrl = null\n          } else {\n            alert(\"파일을 다시 선택해 주세요.\")\n            this.selectFile = null\n            this.previewImgUrl = null\n          }\n        } else {\n          // 파일을 선택하지 않았을때\n          this.selectFile = null\n          this.previewImgUrl = null\n        }\n        console.log(this.selectFile)\n      },\n\n      async formSubmit() {\n        if (this.selectFile) {\n          // Form 필드 생성\n          //let form = new FormData()\n          //form.append(\"file\", this.selectFile) // api file name\n          //this.isUploading = true\n\n          http\n            .post(\"http://10.1.30.202:5000/upload\")\n            .then((res) => {\n              this.response = res.data\n              this.isUploading = false\n            })\n            .catch((error) => {\n              this.response = error\n              this.isUploading = false\n            })\n        } else {\n          alert(\"파일을 선택해 주세요.\")\n        }\n\n        return true\n      },\n    },\n  }\n</script>\n\n<style scoped></style>"]},"metadata":{},"sourceType":"module"}