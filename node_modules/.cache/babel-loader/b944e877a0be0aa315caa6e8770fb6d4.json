{"ast":null,"code":"import \"core-js/modules/es.typed-array.find-last.js\";\nimport \"core-js/modules/es.typed-array.find-last-index.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { PDFLinkService } from 'pdfjs-dist/web/pdf_viewer';\nvar pendingOperation = Promise.resolve();\nexport default function (PDFJS) {\n  function isPDFDocumentLoadingTask(obj) {\n    return typeof obj === 'object' && obj !== null && obj.__PDFDocumentLoadingTask === true;\n  }\n  function createLoadingTask(src, options) {\n    var source;\n    if (typeof src === 'string') {\n      source = {\n        url: src\n      };\n    } else if (src instanceof Uint8Array) {\n      source = {\n        data: src\n      };\n    } else if (typeof src === 'object' && src !== null) {\n      source = Object.assign({}, src);\n    } else {\n      throw new TypeError('invalid src type');\n    }\n    if (options && options.withCredentials) {\n      source.withCredentials = options.withCredentials;\n    }\n    var loadingTask = PDFJS.getDocument(source);\n    loadingTask.__PDFDocumentLoadingTask = true; // since PDFDocumentLoadingTask is not public\n\n    if (options && options.onPassword) {\n      loadingTask.onPassword = options.onPassword;\n    }\n    if (options && options.onProgress) {\n      loadingTask.onProgress = options.onProgress;\n    }\n    return loadingTask;\n  }\n  function PDFJSWrapper(canvasElt, annotationLayerElt, emit, initialPage, initialRotate) {\n    var pdfDoc = null;\n    var pdfPage = null;\n    var pdfRender = null;\n    var canceling = false;\n    canvasElt.getContext('2d').save();\n    function clearCanvas() {\n      canvasElt.getContext('2d').clearRect(0, 0, canvasElt.width, canvasElt.height);\n    }\n    function clearAnnotations() {\n      while (annotationLayerElt.firstChild) {\n        annotationLayerElt.removeChild(annotationLayerElt.firstChild);\n      }\n    }\n    this.destroy = function () {\n      if (pdfDoc === null) {\n        return;\n      }\n\n      // Aborts all network requests and destroys worker.\n      pendingOperation = pdfDoc.destroy();\n      pdfDoc = null;\n    };\n    this.getResolutionScale = function () {\n      return canvasElt.offsetWidth / canvasElt.width;\n    };\n    this.printPage = function (dpi, pageNumberOnly) {\n      if (pdfPage === null) {\n        return;\n      }\n\n      // 1in == 72pt\n      // 1in == 96px\n      var PRINT_RESOLUTION = dpi === undefined ? 150 : dpi;\n      var PRINT_UNITS = PRINT_RESOLUTION / 72.0;\n      var CSS_UNITS = 96.0 / 72.0;\n      var iframeElt = document.createElement('iframe');\n      function removeIframe() {\n        iframeElt.parentNode.removeChild(iframeElt);\n      }\n      new Promise(function (resolve, reject) {\n        iframeElt.frameBorder = '0';\n        iframeElt.scrolling = 'no';\n        iframeElt.width = '0px;';\n        iframeElt.height = '0px;';\n        iframeElt.style.cssText = 'position: absolute; top: 0; left: 0';\n        iframeElt.onload = function () {\n          resolve(this.contentWindow);\n        };\n        window.document.body.appendChild(iframeElt);\n      }).then(function (win) {\n        win.document.title = '';\n        return pdfDoc.getPage(1).then(function (page) {\n          var viewport = page.getViewport({\n            scale: 1\n          });\n          win.document.head.appendChild(win.document.createElement('style')).textContent = '@supports ((size:A4) and (size:1pt 1pt)) {' + '@page { margin: 1pt; size: ' + viewport.width * PRINT_UNITS / CSS_UNITS + 'pt ' + viewport.height * PRINT_UNITS / CSS_UNITS + 'pt; }' + '}' + '@media print {' + 'body { margin: 0 }' + 'canvas { page-break-before: avoid; page-break-after: always; page-break-inside: avoid }' + '}' + '@media screen {' + 'body { margin: 0 }' + '}' + '';\n          return win;\n        });\n      }).then(function (win) {\n        var allPages = [];\n        for (var pageNumber = 1; pageNumber <= pdfDoc.numPages; ++pageNumber) {\n          if (pageNumberOnly !== undefined && pageNumberOnly.indexOf(pageNumber) === -1) {\n            continue;\n          }\n          allPages.push(pdfDoc.getPage(pageNumber).then(function (page) {\n            var viewport = page.getViewport({\n              scale: 1\n            });\n            var printCanvasElt = win.document.body.appendChild(win.document.createElement('canvas'));\n            printCanvasElt.width = viewport.width * PRINT_UNITS;\n            printCanvasElt.height = viewport.height * PRINT_UNITS;\n            return page.render({\n              canvasContext: printCanvasElt.getContext('2d'),\n              transform: [\n              // Additional transform, applied just before viewport transform.\n              PRINT_UNITS, 0, 0, PRINT_UNITS, 0, 0],\n              viewport: viewport,\n              intent: 'print'\n            }).promise;\n          }));\n        }\n        Promise.all(allPages).then(function () {\n          win.focus(); // Required for IE\n          if (win.document.queryCommandSupported('print')) {\n            win.document.execCommand('print', false, null);\n          } else {\n            win.print();\n          }\n          removeIframe();\n        }).catch(function (err) {\n          removeIframe();\n          emit('error', err);\n        });\n      });\n    };\n    this.renderPage = function (rotate) {\n      if (pdfRender !== null) {\n        if (canceling) {\n          return;\n        }\n        canceling = true;\n        pdfRender.cancel().catch(function (err) {\n          emit('error', err);\n        });\n        return;\n      }\n      if (pdfPage === null) {\n        return;\n      }\n      var pageRotate = (pdfPage.rotate === undefined ? 0 : pdfPage.rotate) + (rotate === undefined ? 0 : rotate);\n      var scale = canvasElt.offsetWidth / pdfPage.getViewport({\n        scale: 1\n      }).width * (window.devicePixelRatio || 1);\n      var viewport = pdfPage.getViewport({\n        scale: scale,\n        rotation: pageRotate\n      });\n      canvasElt.style.height = canvasElt.offsetWidth * (viewport.height / viewport.width) + 'px';\n      emit('pageSize', {\n        width: viewport.width,\n        height: viewport.height,\n        scale\n      });\n      canvasElt.width = viewport.width;\n      canvasElt.height = viewport.height;\n      pdfRender = pdfPage.render({\n        canvasContext: canvasElt.getContext('2d'),\n        viewport: viewport\n      });\n      annotationLayerElt.style.visibility = 'hidden';\n      clearAnnotations();\n      var viewer = {\n        scrollPageIntoView: function (params) {\n          emit('linkClicked', params.pageNumber);\n        }\n      };\n      var linkService = new PDFLinkService();\n      linkService.setDocument(pdfDoc);\n      linkService.setViewer(viewer);\n      pendingOperation = pendingOperation.then(function () {\n        var getAnnotationsOperation = pdfPage.getAnnotations({\n          intent: 'display'\n        }).then(function (annotations) {\n          PDFJS.AnnotationLayer.render({\n            viewport: viewport.clone({\n              dontFlip: true\n            }),\n            div: annotationLayerElt,\n            annotations: annotations,\n            page: pdfPage,\n            linkService: linkService,\n            renderInteractiveForms: false\n          });\n        });\n        var pdfRenderOperation = pdfRender.promise.then(function () {\n          annotationLayerElt.style.visibility = '';\n          canceling = false;\n          pdfRender = null;\n        }).catch(function (err) {\n          pdfRender = null;\n          if (err instanceof PDFJS.RenderingCancelledException) {\n            canceling = false;\n            this.renderPage(rotate);\n            return;\n          }\n          emit('error', err);\n        }.bind(this));\n        return Promise.all([getAnnotationsOperation, pdfRenderOperation]);\n      }.bind(this));\n    };\n    this.forEachPage = function (pageCallback) {\n      var numPages = pdfDoc.numPages;\n      (function next(pageNum) {\n        pdfDoc.getPage(pageNum).then(pageCallback).then(function () {\n          if (++pageNum <= numPages) {\n            next(pageNum);\n          }\n        });\n      })(1);\n    };\n    this.loadPage = function (pageNumber, rotate) {\n      pdfPage = null;\n      if (pdfDoc === null) {\n        return;\n      }\n      pendingOperation = pendingOperation.then(function () {\n        return pdfDoc.getPage(pageNumber);\n      }).then(function (page) {\n        pdfPage = page;\n        this.renderPage(rotate);\n        emit('pageLoaded', page.pageNumber);\n      }.bind(this)).catch(function (err) {\n        clearCanvas();\n        clearAnnotations();\n        emit('error', err);\n      });\n    };\n\n    // Sorry, no IE support...\n    let loadInitialPage = () => this.loadPage(initialPage, initialRotate);\n    this.loadDocument = function (src) {\n      pdfDoc = null;\n      pdfPage = null;\n      emit('numPages', undefined);\n      if (!src) {\n        canvasElt.removeAttribute('width');\n        canvasElt.removeAttribute('height');\n        clearAnnotations();\n        return;\n      }\n\n      // wait for pending operation ends\n      pendingOperation = pendingOperation.then(function () {\n        var loadingTask;\n        if (isPDFDocumentLoadingTask(src)) {\n          if (src.destroyed) {\n            emit('error', new Error('loadingTask has been destroyed'));\n            return;\n          }\n          loadingTask = src;\n        } else {\n          loadingTask = createLoadingTask(src, {\n            onPassword: function (updatePassword, reason) {\n              var reasonStr;\n              switch (reason) {\n                case PDFJS.PasswordResponses.NEED_PASSWORD:\n                  reasonStr = 'NEED_PASSWORD';\n                  break;\n                case PDFJS.PasswordResponses.INCORRECT_PASSWORD:\n                  reasonStr = 'INCORRECT_PASSWORD';\n                  break;\n              }\n              emit('password', updatePassword, reasonStr);\n            },\n            onProgress: function (status) {\n              var ratio = status.loaded / status.total;\n              emit('progress', Math.min(ratio, 1));\n            }\n          });\n        }\n        return loadingTask.promise;\n      }).then(function (pdf) {\n        pdfDoc = pdf;\n        emit('numPages', pdf.numPages);\n        loadInitialPage();\n        emit('loaded');\n      }).catch(function (err) {\n        clearCanvas();\n        clearAnnotations();\n        emit('error', err);\n      });\n    };\n    annotationLayerElt.style.transformOrigin = '0 0';\n  }\n  return {\n    createLoadingTask: createLoadingTask,\n    PDFJSWrapper: PDFJSWrapper\n  };\n}","map":{"version":3,"names":["PDFLinkService","pendingOperation","Promise","resolve","PDFJS","isPDFDocumentLoadingTask","obj","__PDFDocumentLoadingTask","createLoadingTask","src","options","source","url","Uint8Array","data","Object","assign","TypeError","withCredentials","loadingTask","getDocument","onPassword","onProgress","PDFJSWrapper","canvasElt","annotationLayerElt","emit","initialPage","initialRotate","pdfDoc","pdfPage","pdfRender","canceling","getContext","save","clearCanvas","clearRect","width","height","clearAnnotations","firstChild","removeChild","destroy","getResolutionScale","offsetWidth","printPage","dpi","pageNumberOnly","PRINT_RESOLUTION","undefined","PRINT_UNITS","CSS_UNITS","iframeElt","document","createElement","removeIframe","parentNode","reject","frameBorder","scrolling","style","cssText","onload","contentWindow","window","body","appendChild","then","win","title","getPage","page","viewport","getViewport","scale","head","textContent","allPages","pageNumber","numPages","indexOf","push","printCanvasElt","render","canvasContext","transform","intent","promise","all","focus","queryCommandSupported","execCommand","print","catch","err","renderPage","rotate","cancel","pageRotate","devicePixelRatio","rotation","visibility","viewer","scrollPageIntoView","params","linkService","setDocument","setViewer","getAnnotationsOperation","getAnnotations","annotations","AnnotationLayer","clone","dontFlip","div","renderInteractiveForms","pdfRenderOperation","RenderingCancelledException","bind","forEachPage","pageCallback","next","pageNum","loadPage","loadInitialPage","loadDocument","removeAttribute","destroyed","Error","updatePassword","reason","reasonStr","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","status","ratio","loaded","total","Math","min","pdf","transformOrigin"],"sources":["/lab/node_modules/@jbtje/vue3pdf/src/pdfjsWrapper.js"],"sourcesContent":["import {PDFLinkService} from 'pdfjs-dist/web/pdf_viewer';\r\n\r\nvar pendingOperation = Promise.resolve();\r\n\r\nexport default function( PDFJS ) {\r\n\r\n    function isPDFDocumentLoadingTask( obj ) {\r\n        return typeof (obj) === 'object' && obj !== null && obj.__PDFDocumentLoadingTask === true;\r\n    }\r\n\r\n    function createLoadingTask( src, options ) {\r\n        var source;\r\n        if( typeof (src) === 'string' ) {\r\n            source = {url: src};\r\n        }\r\n        else if( src instanceof Uint8Array ) {\r\n            source = {data: src};\r\n        }\r\n        else if( typeof (src) === 'object' && src !== null ) {\r\n            source = Object.assign( {}, src );\r\n        }\r\n        else {\r\n            throw new TypeError( 'invalid src type' );\r\n        }\r\n\r\n        if( options && options.withCredentials ) {\r\n            source.withCredentials = options.withCredentials;\r\n        }\r\n\r\n        var loadingTask                      = PDFJS.getDocument( source );\r\n        loadingTask.__PDFDocumentLoadingTask = true; // since PDFDocumentLoadingTask is not public\r\n\r\n        if( options && options.onPassword ) {\r\n            loadingTask.onPassword = options.onPassword;\r\n        }\r\n\r\n        if( options && options.onProgress ) {\r\n            loadingTask.onProgress = options.onProgress;\r\n        }\r\n\r\n        return loadingTask;\r\n    }\r\n\r\n\r\n    function PDFJSWrapper( canvasElt, annotationLayerElt, emit, initialPage, initialRotate ) {\r\n        var pdfDoc    = null;\r\n        var pdfPage   = null;\r\n        var pdfRender = null;\r\n        var canceling = false;\r\n\r\n        canvasElt.getContext( '2d' ).save();\r\n\r\n        function clearCanvas() {\r\n            canvasElt.getContext( '2d' ).clearRect( 0, 0, canvasElt.width, canvasElt.height );\r\n        }\r\n\r\n        function clearAnnotations() {\r\n            while( annotationLayerElt.firstChild ) {\r\n                annotationLayerElt.removeChild( annotationLayerElt.firstChild );\r\n            }\r\n        }\r\n\r\n        this.destroy = function() {\r\n            if( pdfDoc === null ) {\r\n                return;\r\n            }\r\n\r\n            // Aborts all network requests and destroys worker.\r\n            pendingOperation = pdfDoc.destroy();\r\n            pdfDoc           = null;\r\n        };\r\n\r\n        this.getResolutionScale = function() {\r\n            return canvasElt.offsetWidth / canvasElt.width;\r\n        };\r\n\r\n        this.printPage = function( dpi, pageNumberOnly ) {\r\n            if( pdfPage === null ) {\r\n                return;\r\n            }\r\n\r\n            // 1in == 72pt\r\n            // 1in == 96px\r\n            var PRINT_RESOLUTION = dpi === undefined ? 150 : dpi;\r\n            var PRINT_UNITS      = PRINT_RESOLUTION / 72.0;\r\n            var CSS_UNITS        = 96.0 / 72.0;\r\n\r\n            var iframeElt = document.createElement( 'iframe' );\r\n\r\n            function removeIframe() {\r\n                iframeElt.parentNode.removeChild( iframeElt );\r\n            }\r\n\r\n            new Promise( function( resolve, reject ) {\r\n                iframeElt.frameBorder   = '0';\r\n                iframeElt.scrolling     = 'no';\r\n                iframeElt.width         = '0px;';\r\n                iframeElt.height        = '0px;';\r\n                iframeElt.style.cssText = 'position: absolute; top: 0; left: 0';\r\n\r\n                iframeElt.onload = function() {\r\n\r\n                    resolve( this.contentWindow );\r\n                };\r\n\r\n                window.document.body.appendChild( iframeElt );\r\n            } ).then( function( win ) {\r\n                win.document.title = '';\r\n\r\n                return pdfDoc.getPage( 1 ).then( function( page ) {\r\n                    var viewport = page.getViewport( {scale: 1} );\r\n\r\n                    win.document.head.appendChild( win.document.createElement( 'style' ) ).textContent =\r\n                        '@supports ((size:A4) and (size:1pt 1pt)) {' +\r\n                        '@page { margin: 1pt; size: ' + ((viewport.width * PRINT_UNITS) / CSS_UNITS) + 'pt ' + ((viewport.height * PRINT_UNITS) / CSS_UNITS) + 'pt; }' +\r\n                        '}' +\r\n\r\n                        '@media print {' +\r\n                        'body { margin: 0 }' +\r\n                        'canvas { page-break-before: avoid; page-break-after: always; page-break-inside: avoid }' +\r\n                        '}' +\r\n\r\n                        '@media screen {' +\r\n                        'body { margin: 0 }' +\r\n                        '}' +\r\n\r\n                        '';\r\n                    return win;\r\n                } );\r\n            } ).then( function( win ) {\r\n                var allPages = [];\r\n\r\n                for( var pageNumber = 1; pageNumber <= pdfDoc.numPages; ++pageNumber ) {\r\n\r\n                    if( pageNumberOnly !== undefined && pageNumberOnly.indexOf( pageNumber ) === -1 ) {\r\n                        continue;\r\n                    }\r\n\r\n                    allPages.push(\r\n                        pdfDoc.getPage( pageNumber ).then( function( page ) {\r\n\r\n                            var viewport = page.getViewport( {scale: 1} );\r\n\r\n                            var printCanvasElt    = win.document.body.appendChild( win.document.createElement( 'canvas' ) );\r\n                            printCanvasElt.width  = (viewport.width * PRINT_UNITS);\r\n                            printCanvasElt.height = (viewport.height * PRINT_UNITS);\r\n\r\n                            return page.render( {\r\n                                canvasContext: printCanvasElt.getContext( '2d' ),\r\n                                transform:     [ // Additional transform, applied just before viewport transform.\r\n                                    PRINT_UNITS, 0, 0,\r\n                                    PRINT_UNITS, 0, 0,\r\n                                ],\r\n                                viewport:      viewport,\r\n                                intent:        'print',\r\n                            } ).promise;\r\n                        } ),\r\n                    );\r\n                }\r\n\r\n                Promise.all( allPages ).then( function() {\r\n                    win.focus(); // Required for IE\r\n                    if( win.document.queryCommandSupported( 'print' ) ) {\r\n                        win.document.execCommand( 'print', false, null );\r\n                    }\r\n                    else {\r\n                        win.print();\r\n                    }\r\n                    removeIframe();\r\n                } ).catch( function( err ) {\r\n                    removeIframe();\r\n                    emit( 'error', err );\r\n                } );\r\n            } );\r\n        };\r\n\r\n        this.renderPage = function( rotate ) {\r\n            if( pdfRender !== null ) {\r\n                if( canceling ) {\r\n                    return;\r\n                }\r\n\r\n                canceling = true;\r\n                pdfRender.cancel().catch( function( err ) {\r\n                    emit( 'error', err );\r\n                } );\r\n                return;\r\n            }\r\n\r\n            if( pdfPage === null ) {\r\n                return;\r\n            }\r\n\r\n            var pageRotate = (pdfPage.rotate === undefined ? 0 : pdfPage.rotate) + (rotate === undefined ? 0 : rotate);\r\n\r\n            var scale    = canvasElt.offsetWidth / pdfPage.getViewport( {scale: 1} ).width * (window.devicePixelRatio || 1);\r\n            var viewport = pdfPage.getViewport( {scale: scale, rotation: pageRotate} );\r\n\r\n            canvasElt.style.height = canvasElt.offsetWidth * (viewport.height / viewport.width) + 'px';\r\n            emit( 'pageSize', {width: viewport.width, height: viewport.height, scale} );\r\n\r\n            canvasElt.width  = viewport.width;\r\n            canvasElt.height = viewport.height;\r\n\r\n            pdfRender = pdfPage.render( {\r\n                canvasContext: canvasElt.getContext( '2d' ),\r\n                viewport:      viewport,\r\n            } );\r\n\r\n            annotationLayerElt.style.visibility = 'hidden';\r\n            clearAnnotations();\r\n\r\n            var viewer = {\r\n                scrollPageIntoView: function( params ) {\r\n                    emit( 'linkClicked', params.pageNumber );\r\n                },\r\n            };\r\n\r\n            var linkService = new PDFLinkService();\r\n            linkService.setDocument( pdfDoc );\r\n            linkService.setViewer( viewer );\r\n\r\n            pendingOperation = pendingOperation.then( function() {\r\n                var getAnnotationsOperation = pdfPage.getAnnotations( {intent: 'display'} ).then( function( annotations ) {\r\n                    PDFJS.AnnotationLayer.render( {\r\n                        viewport:               viewport.clone( {dontFlip: true} ),\r\n                        div:                    annotationLayerElt,\r\n                        annotations:            annotations,\r\n                        page:                   pdfPage,\r\n                        linkService:            linkService,\r\n                        renderInteractiveForms: false,\r\n                    } );\r\n                } );\r\n\r\n                var pdfRenderOperation = pdfRender.promise.then( function() {\r\n                    annotationLayerElt.style.visibility = '';\r\n                    canceling                           = false;\r\n                    pdfRender                           = null;\r\n                } ).catch( function( err ) {\r\n                    pdfRender = null;\r\n                    if( err instanceof PDFJS.RenderingCancelledException ) {\r\n                        canceling = false;\r\n                        this.renderPage( rotate );\r\n                        return;\r\n                    }\r\n                    emit( 'error', err );\r\n                }.bind( this ) );\r\n\r\n                return Promise.all( [getAnnotationsOperation, pdfRenderOperation] );\r\n            }.bind( this ) );\r\n        };\r\n\r\n\r\n        this.forEachPage = function( pageCallback ) {\r\n            var numPages = pdfDoc.numPages;\r\n\r\n            (function next( pageNum ) {\r\n                pdfDoc.getPage( pageNum )\r\n                      .then( pageCallback )\r\n                      .then( function() {\r\n\r\n                          if( ++pageNum <= numPages ) {\r\n                              next( pageNum );\r\n                          }\r\n                      } );\r\n            })( 1 );\r\n        };\r\n\r\n\r\n        this.loadPage = function( pageNumber, rotate ) {\r\n            pdfPage = null;\r\n\r\n            if( pdfDoc === null ) {\r\n                return;\r\n            }\r\n\r\n            pendingOperation = pendingOperation.then( function() {\r\n                return pdfDoc.getPage( pageNumber );\r\n            } ).then( function( page ) {\r\n                pdfPage = page;\r\n                this.renderPage( rotate );\r\n                emit( 'pageLoaded', page.pageNumber );\r\n            }.bind( this ) ).catch( function( err ) {\r\n                clearCanvas();\r\n                clearAnnotations();\r\n                emit( 'error', err );\r\n            } );\r\n        };\r\n\r\n        // Sorry, no IE support...\r\n        let loadInitialPage = () => this.loadPage( initialPage, initialRotate );\r\n\r\n        this.loadDocument = function( src ) {\r\n            pdfDoc  = null;\r\n            pdfPage = null;\r\n\r\n            emit( 'numPages', undefined );\r\n\r\n            if( !src ) {\r\n                canvasElt.removeAttribute( 'width' );\r\n                canvasElt.removeAttribute( 'height' );\r\n                clearAnnotations();\r\n                return;\r\n            }\r\n\r\n            // wait for pending operation ends\r\n            pendingOperation = pendingOperation.then( function() {\r\n                var loadingTask;\r\n                if( isPDFDocumentLoadingTask( src ) ) {\r\n                    if( src.destroyed ) {\r\n                        emit( 'error', new Error( 'loadingTask has been destroyed' ) );\r\n                        return;\r\n                    }\r\n\r\n                    loadingTask = src;\r\n                }\r\n                else {\r\n                    loadingTask = createLoadingTask( src, {\r\n                        onPassword: function( updatePassword, reason ) {\r\n\r\n                            var reasonStr;\r\n                            switch( reason ) {\r\n                                case PDFJS.PasswordResponses.NEED_PASSWORD:\r\n                                    reasonStr = 'NEED_PASSWORD';\r\n                                    break;\r\n                                case PDFJS.PasswordResponses.INCORRECT_PASSWORD:\r\n                                    reasonStr = 'INCORRECT_PASSWORD';\r\n                                    break;\r\n                            }\r\n                            emit( 'password', updatePassword, reasonStr );\r\n                        },\r\n                        onProgress: function( status ) {\r\n\r\n                            var ratio = status.loaded / status.total;\r\n                            emit( 'progress', Math.min( ratio, 1 ) );\r\n                        },\r\n                    } );\r\n                }\r\n\r\n                return loadingTask.promise;\r\n            } ).then( function( pdf ) {\r\n                pdfDoc = pdf;\r\n\r\n                emit( 'numPages', pdf.numPages );\r\n\r\n                loadInitialPage();\r\n                emit( 'loaded' );\r\n            } ).catch( function( err ) {\r\n\r\n                clearCanvas();\r\n                clearAnnotations();\r\n                emit( 'error', err );\r\n            } );\r\n        };\r\n\r\n        annotationLayerElt.style.transformOrigin = '0 0';\r\n    }\r\n\r\n\r\n    return {\r\n        createLoadingTask: createLoadingTask,\r\n        PDFJSWrapper:      PDFJSWrapper,\r\n    };\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}