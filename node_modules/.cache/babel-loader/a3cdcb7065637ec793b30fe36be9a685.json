{"ast":null,"code":"import DashboardPlugin from '@uppy/dashboard';\nimport { shallowEqualObjects } from 'shallow-equal';\nimport * as Vue from 'vue';\nimport { isVue2 } from './utils.js';\nexport default {\n  data() {\n    return {\n      plugin: {}\n    };\n  },\n  props: {\n    uppy: {\n      required: true\n    },\n    props: {\n      type: Object\n    },\n    plugins: {\n      type: Array\n    },\n    open: {\n      type: Boolean,\n      required: true\n    }\n  },\n  mounted() {\n    this.installPlugin();\n  },\n  methods: {\n    installPlugin() {\n      const {\n        uppy\n      } = this;\n      const options = {\n        id: 'vue:DashboardModal',\n        plugins: this.plugins,\n        ...this.props,\n        target: this.$refs.container\n      };\n      uppy.use(DashboardPlugin, options);\n      this.plugin = uppy.getPlugin(options.id);\n      if (this.open) {\n        this.plugin.openModal();\n      }\n    },\n    uninstallPlugin(uppy) {\n      uppy.removePlugin(this.plugin);\n    }\n  },\n  beforeDestroy() {\n    this.uninstallPlugin(this.uppy);\n  },\n  beforeUnmount() {\n    this.uninstallPlugin(this.uppy);\n  },\n  watch: {\n    uppy(current, old) {\n      if (old !== current) {\n        this.uninstallPlugin(old);\n        this.installPlugin();\n      }\n    },\n    open(current, old) {\n      if (current && !old) {\n        this.plugin.openModal();\n      }\n      if (!current && old) {\n        this.plugin.closeModal();\n      }\n    },\n    props(current, old) {\n      if (!shallowEqualObjects(current, old)) {\n        this.plugin.setOptions({\n          ...current\n        });\n      }\n    }\n  },\n  render() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // Hack to allow support for Vue 2 and 3\n    if (isVue2(...args)) {\n      // If it's first argument is a function, then it's a Vue 2 App\n      const [createElement] = args;\n      return createElement('div', {\n        ref: 'container'\n      });\n    } // Otherwise, we use the `h` function from the Vue package (in Vue 3 fashion)\n\n    return Vue.h('div', {\n      ref: 'container'\n    });\n  }\n};","map":{"version":3,"names":["DashboardPlugin","shallowEqualObjects","Vue","isVue2","data","plugin","props","uppy","required","type","Object","plugins","Array","open","Boolean","mounted","installPlugin","methods","options","id","target","$refs","container","use","getPlugin","openModal","uninstallPlugin","removePlugin","beforeDestroy","beforeUnmount","watch","current","old","closeModal","setOptions","render","_len","arguments","length","args","_key","createElement","ref","h"],"sources":["/lab/node_modules/@uppy/vue/lib/dashboard-modal.js"],"sourcesContent":["import DashboardPlugin from '@uppy/dashboard';\nimport { shallowEqualObjects } from 'shallow-equal';\nimport * as Vue from 'vue';\nimport { isVue2 } from './utils.js';\nexport default {\n  data() {\n    return {\n      plugin: {}\n    };\n  },\n\n  props: {\n    uppy: {\n      required: true\n    },\n    props: {\n      type: Object\n    },\n    plugins: {\n      type: Array\n    },\n    open: {\n      type: Boolean,\n      required: true\n    }\n  },\n\n  mounted() {\n    this.installPlugin();\n  },\n\n  methods: {\n    installPlugin() {\n      const {\n        uppy\n      } = this;\n      const options = {\n        id: 'vue:DashboardModal',\n        plugins: this.plugins,\n        ...this.props,\n        target: this.$refs.container\n      };\n      uppy.use(DashboardPlugin, options);\n      this.plugin = uppy.getPlugin(options.id);\n\n      if (this.open) {\n        this.plugin.openModal();\n      }\n    },\n\n    uninstallPlugin(uppy) {\n      uppy.removePlugin(this.plugin);\n    }\n\n  },\n\n  beforeDestroy() {\n    this.uninstallPlugin(this.uppy);\n  },\n\n  beforeUnmount() {\n    this.uninstallPlugin(this.uppy);\n  },\n\n  watch: {\n    uppy(current, old) {\n      if (old !== current) {\n        this.uninstallPlugin(old);\n        this.installPlugin();\n      }\n    },\n\n    open(current, old) {\n      if (current && !old) {\n        this.plugin.openModal();\n      }\n\n      if (!current && old) {\n        this.plugin.closeModal();\n      }\n    },\n\n    props(current, old) {\n      if (!shallowEqualObjects(current, old)) {\n        this.plugin.setOptions({ ...current\n        });\n      }\n    }\n\n  },\n\n  render() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // Hack to allow support for Vue 2 and 3\n    if (isVue2(...args)) {\n      // If it's first argument is a function, then it's a Vue 2 App\n      const [createElement] = args;\n      return createElement('div', {\n        ref: 'container'\n      });\n    } // Otherwise, we use the `h` function from the Vue package (in Vue 3 fashion)\n\n\n    return Vue.h('div', {\n      ref: 'container'\n    });\n  }\n\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}