{"ast":null,"code":"import { h, Component } from 'preact';\nimport classNames from 'classnames';\nimport shallowEqual from 'is-shallow-equal';\nimport FilePreviewAndLink from \"./FilePreviewAndLink/index.js\";\nimport FileProgress from \"./FileProgress/index.js\";\nimport FileInfo from \"./FileInfo/index.js\";\nimport Buttons from \"./Buttons/index.js\";\nexport default class FileItem extends Component {\n  componentDidMount() {\n    const {\n      file\n    } = this.props;\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file);\n    }\n  }\n  shouldComponentUpdate(nextProps) {\n    return !shallowEqual(this.props, nextProps);\n  } // VirtualList mounts FileItems again and they emit `thumbnail:request`\n  // Otherwise thumbnails are broken or missing after Golden Retriever restores files\n\n  componentDidUpdate() {\n    const {\n      file\n    } = this.props;\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file);\n    }\n  }\n  componentWillUnmount() {\n    const {\n      file\n    } = this.props;\n    if (!file.preview) {\n      this.props.handleCancelThumbnail(file);\n    }\n  }\n  render() {\n    const {\n      file\n    } = this.props;\n    const isProcessing = file.progress.preprocess || file.progress.postprocess;\n    const isUploaded = file.progress.uploadComplete && !isProcessing && !file.error;\n    const uploadInProgressOrComplete = file.progress.uploadStarted || isProcessing;\n    const uploadInProgress = file.progress.uploadStarted && !file.progress.uploadComplete || isProcessing;\n    const error = file.error || false; // File that Golden Retriever was able to partly restore (only meta, not blob),\n    // users still need to re-add it, so it’s a ghost\n\n    const {\n      isGhost\n    } = file;\n    let showRemoveButton = this.props.individualCancellation ? !isUploaded : !uploadInProgress && !isUploaded;\n    if (isUploaded && this.props.showRemoveButtonAfterComplete) {\n      showRemoveButton = true;\n    }\n    const dashboardItemClass = classNames({\n      'uppy-Dashboard-Item': true,\n      'is-inprogress': uploadInProgress && !this.props.recoveredState,\n      'is-processing': isProcessing,\n      'is-complete': isUploaded,\n      'is-error': !!error,\n      'is-resumable': this.props.resumableUploads,\n      'is-noIndividualCancellation': !this.props.individualCancellation,\n      'is-ghost': isGhost\n    });\n    return h(\"div\", {\n      className: dashboardItemClass,\n      id: `uppy_${file.id}`,\n      role: this.props.role\n    }, h(\"div\", {\n      className: \"uppy-Dashboard-Item-preview\"\n    }, h(FilePreviewAndLink, {\n      file: file,\n      showLinkToFileUploadResult: this.props.showLinkToFileUploadResult,\n      i18n: this.props.i18n,\n      toggleFileCard: this.props.toggleFileCard,\n      metaFields: this.props.metaFields\n    }), h(FileProgress, {\n      uppy: this.props.uppy,\n      file: file,\n      error: error,\n      isUploaded: isUploaded,\n      hideRetryButton: this.props.hideRetryButton,\n      hideCancelButton: this.props.hideCancelButton,\n      hidePauseResumeButton: this.props.hidePauseResumeButton,\n      recoveredState: this.props.recoveredState,\n      showRemoveButtonAfterComplete: this.props.showRemoveButtonAfterComplete,\n      resumableUploads: this.props.resumableUploads,\n      individualCancellation: this.props.individualCancellation,\n      i18n: this.props.i18n\n    })), h(\"div\", {\n      className: \"uppy-Dashboard-Item-fileInfoAndButtons\"\n    }, h(FileInfo, {\n      file: file,\n      id: this.props.id,\n      acquirers: this.props.acquirers,\n      containerWidth: this.props.containerWidth,\n      i18n: this.props.i18n,\n      toggleAddFilesPanel: this.props.toggleAddFilesPanel,\n      toggleFileCard: this.props.toggleFileCard,\n      metaFields: this.props.metaFields\n    }), h(Buttons, {\n      file: file,\n      metaFields: this.props.metaFields,\n      showLinkToFileUploadResult: this.props.showLinkToFileUploadResult,\n      showRemoveButton: showRemoveButton,\n      canEditFile: this.props.canEditFile,\n      uploadInProgressOrComplete: uploadInProgressOrComplete,\n      toggleFileCard: this.props.toggleFileCard,\n      openFileEditor: this.props.openFileEditor,\n      uppy: this.props.uppy,\n      i18n: this.props.i18n\n    })));\n  }\n}","map":{"version":3,"names":["h","Component","classNames","shallowEqual","FilePreviewAndLink","FileProgress","FileInfo","Buttons","FileItem","componentDidMount","file","props","preview","handleRequestThumbnail","shouldComponentUpdate","nextProps","componentDidUpdate","componentWillUnmount","handleCancelThumbnail","render","isProcessing","progress","preprocess","postprocess","isUploaded","uploadComplete","error","uploadInProgressOrComplete","uploadStarted","uploadInProgress","isGhost","showRemoveButton","individualCancellation","showRemoveButtonAfterComplete","dashboardItemClass","recoveredState","resumableUploads","className","id","role","showLinkToFileUploadResult","i18n","toggleFileCard","metaFields","uppy","hideRetryButton","hideCancelButton","hidePauseResumeButton","acquirers","containerWidth","toggleAddFilesPanel","canEditFile","openFileEditor"],"sources":["/lab/node_modules/@uppy/dashboard/lib/components/FileItem/index.js"],"sourcesContent":["import { h, Component } from 'preact';\nimport classNames from 'classnames';\nimport shallowEqual from 'is-shallow-equal';\nimport FilePreviewAndLink from \"./FilePreviewAndLink/index.js\";\nimport FileProgress from \"./FileProgress/index.js\";\nimport FileInfo from \"./FileInfo/index.js\";\nimport Buttons from \"./Buttons/index.js\";\nexport default class FileItem extends Component {\n  componentDidMount() {\n    const {\n      file\n    } = this.props;\n\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file);\n    }\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return !shallowEqual(this.props, nextProps);\n  } // VirtualList mounts FileItems again and they emit `thumbnail:request`\n  // Otherwise thumbnails are broken or missing after Golden Retriever restores files\n\n\n  componentDidUpdate() {\n    const {\n      file\n    } = this.props;\n\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file);\n    }\n  }\n\n  componentWillUnmount() {\n    const {\n      file\n    } = this.props;\n\n    if (!file.preview) {\n      this.props.handleCancelThumbnail(file);\n    }\n  }\n\n  render() {\n    const {\n      file\n    } = this.props;\n    const isProcessing = file.progress.preprocess || file.progress.postprocess;\n    const isUploaded = file.progress.uploadComplete && !isProcessing && !file.error;\n    const uploadInProgressOrComplete = file.progress.uploadStarted || isProcessing;\n    const uploadInProgress = file.progress.uploadStarted && !file.progress.uploadComplete || isProcessing;\n    const error = file.error || false; // File that Golden Retriever was able to partly restore (only meta, not blob),\n    // users still need to re-add it, so it’s a ghost\n\n    const {\n      isGhost\n    } = file;\n    let showRemoveButton = this.props.individualCancellation ? !isUploaded : !uploadInProgress && !isUploaded;\n\n    if (isUploaded && this.props.showRemoveButtonAfterComplete) {\n      showRemoveButton = true;\n    }\n\n    const dashboardItemClass = classNames({\n      'uppy-Dashboard-Item': true,\n      'is-inprogress': uploadInProgress && !this.props.recoveredState,\n      'is-processing': isProcessing,\n      'is-complete': isUploaded,\n      'is-error': !!error,\n      'is-resumable': this.props.resumableUploads,\n      'is-noIndividualCancellation': !this.props.individualCancellation,\n      'is-ghost': isGhost\n    });\n    return h(\"div\", {\n      className: dashboardItemClass,\n      id: `uppy_${file.id}`,\n      role: this.props.role\n    }, h(\"div\", {\n      className: \"uppy-Dashboard-Item-preview\"\n    }, h(FilePreviewAndLink, {\n      file: file,\n      showLinkToFileUploadResult: this.props.showLinkToFileUploadResult,\n      i18n: this.props.i18n,\n      toggleFileCard: this.props.toggleFileCard,\n      metaFields: this.props.metaFields\n    }), h(FileProgress, {\n      uppy: this.props.uppy,\n      file: file,\n      error: error,\n      isUploaded: isUploaded,\n      hideRetryButton: this.props.hideRetryButton,\n      hideCancelButton: this.props.hideCancelButton,\n      hidePauseResumeButton: this.props.hidePauseResumeButton,\n      recoveredState: this.props.recoveredState,\n      showRemoveButtonAfterComplete: this.props.showRemoveButtonAfterComplete,\n      resumableUploads: this.props.resumableUploads,\n      individualCancellation: this.props.individualCancellation,\n      i18n: this.props.i18n\n    })), h(\"div\", {\n      className: \"uppy-Dashboard-Item-fileInfoAndButtons\"\n    }, h(FileInfo, {\n      file: file,\n      id: this.props.id,\n      acquirers: this.props.acquirers,\n      containerWidth: this.props.containerWidth,\n      i18n: this.props.i18n,\n      toggleAddFilesPanel: this.props.toggleAddFilesPanel,\n      toggleFileCard: this.props.toggleFileCard,\n      metaFields: this.props.metaFields\n    }), h(Buttons, {\n      file: file,\n      metaFields: this.props.metaFields,\n      showLinkToFileUploadResult: this.props.showLinkToFileUploadResult,\n      showRemoveButton: showRemoveButton,\n      canEditFile: this.props.canEditFile,\n      uploadInProgressOrComplete: uploadInProgressOrComplete,\n      toggleFileCard: this.props.toggleFileCard,\n      openFileEditor: this.props.openFileEditor,\n      uppy: this.props.uppy,\n      i18n: this.props.i18n\n    })));\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}