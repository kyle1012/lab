{"ast":null,"code":"function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n/* eslint-disable jsx-a11y/media-has-caption */\nimport { h, Component } from 'preact';\nimport SnapshotButton from \"./SnapshotButton.js\";\nimport RecordButton from \"./RecordButton.js\";\nimport RecordingLength from \"./RecordingLength.js\";\nimport VideoSourceSelect from \"./VideoSourceSelect.js\";\nimport SubmitButton from \"./SubmitButton.js\";\nimport DiscardButton from \"./DiscardButton.js\";\nfunction isModeAvailable(modes, mode) {\n  return modes.includes(mode);\n}\nclass CameraScreen extends Component {\n  componentDidMount() {\n    const {\n      onFocus\n    } = this.props;\n    onFocus();\n  }\n  componentWillUnmount() {\n    const {\n      onStop\n    } = this.props;\n    onStop();\n  }\n  render() {\n    const {\n      src,\n      recordedVideo,\n      recording,\n      modes,\n      supportsRecording,\n      videoSources,\n      showVideoSourceDropdown,\n      showRecordingLength,\n      onSubmit,\n      i18n,\n      mirror,\n      onSnapshot,\n      onStartRecording,\n      onStopRecording,\n      onDiscardRecordedVideo,\n      recordingLengthSeconds\n    } = this.props;\n    const hasRecordedVideo = !!recordedVideo;\n    const shouldShowRecordButton = !hasRecordedVideo && supportsRecording && (isModeAvailable(modes, 'video-only') || isModeAvailable(modes, 'audio-only') || isModeAvailable(modes, 'video-audio'));\n    const shouldShowSnapshotButton = !hasRecordedVideo && isModeAvailable(modes, 'picture');\n    const shouldShowRecordingLength = supportsRecording && showRecordingLength && !hasRecordedVideo;\n    const shouldShowVideoSourceDropdown = showVideoSourceDropdown && videoSources && videoSources.length > 1;\n    const videoProps = {\n      playsinline: true\n    };\n    if (recordedVideo) {\n      videoProps.muted = false;\n      videoProps.controls = true;\n      videoProps.src = recordedVideo; // reset srcObject in dom. If not resetted, stream sticks in element\n\n      if (this.videoElement) {\n        this.videoElement.srcObject = undefined;\n      }\n    } else {\n      videoProps.muted = true;\n      videoProps.autoplay = true;\n      videoProps.srcObject = src;\n    }\n    return h(\"div\", {\n      className: \"uppy uppy-Webcam-container\"\n    }, h(\"div\", {\n      className: \"uppy-Webcam-videoContainer\"\n    }, h(\"video\", _extends({\n      /* eslint-disable-next-line no-return-assign */\n      ref: videoElement => this.videoElement = videoElement,\n      className: `uppy-Webcam-video  ${mirror ? 'uppy-Webcam-video--mirrored' : ''}`\n      /* eslint-disable-next-line react/jsx-props-no-spreading */\n    }, videoProps))), h(\"div\", {\n      className: \"uppy-Webcam-footer\"\n    }, h(\"div\", {\n      className: \"uppy-Webcam-videoSourceContainer\"\n    }, shouldShowVideoSourceDropdown ? VideoSourceSelect(this.props) : null), h(\"div\", {\n      className: \"uppy-Webcam-buttonContainer\"\n    }, shouldShowSnapshotButton && h(SnapshotButton, {\n      onSnapshot: onSnapshot,\n      i18n: i18n\n    }), shouldShowRecordButton && h(RecordButton, {\n      recording: recording,\n      onStartRecording: onStartRecording,\n      onStopRecording: onStopRecording,\n      i18n: i18n\n    }), hasRecordedVideo && h(SubmitButton, {\n      onSubmit: onSubmit,\n      i18n: i18n\n    }), hasRecordedVideo && h(DiscardButton, {\n      onDiscard: onDiscardRecordedVideo,\n      i18n: i18n\n    })), h(\"div\", {\n      className: \"uppy-Webcam-recordingLength\"\n    }, shouldShowRecordingLength && h(RecordingLength, {\n      recordingLengthSeconds: recordingLengthSeconds,\n      i18n: i18n\n    }))));\n  }\n}\nexport default CameraScreen;","map":{"version":3,"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","h","Component","SnapshotButton","RecordButton","RecordingLength","VideoSourceSelect","SubmitButton","DiscardButton","isModeAvailable","modes","mode","includes","CameraScreen","componentDidMount","onFocus","props","componentWillUnmount","onStop","render","src","recordedVideo","recording","supportsRecording","videoSources","showVideoSourceDropdown","showRecordingLength","onSubmit","i18n","mirror","onSnapshot","onStartRecording","onStopRecording","onDiscardRecordedVideo","recordingLengthSeconds","hasRecordedVideo","shouldShowRecordButton","shouldShowSnapshotButton","shouldShowRecordingLength","shouldShowVideoSourceDropdown","videoProps","playsinline","muted","controls","videoElement","srcObject","undefined","autoplay","className","ref","onDiscard"],"sources":["/lab/node_modules/@uppy/webcam/lib/CameraScreen.js"],"sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/* eslint-disable jsx-a11y/media-has-caption */\nimport { h, Component } from 'preact';\nimport SnapshotButton from \"./SnapshotButton.js\";\nimport RecordButton from \"./RecordButton.js\";\nimport RecordingLength from \"./RecordingLength.js\";\nimport VideoSourceSelect from \"./VideoSourceSelect.js\";\nimport SubmitButton from \"./SubmitButton.js\";\nimport DiscardButton from \"./DiscardButton.js\";\n\nfunction isModeAvailable(modes, mode) {\n  return modes.includes(mode);\n}\n\nclass CameraScreen extends Component {\n  componentDidMount() {\n    const {\n      onFocus\n    } = this.props;\n    onFocus();\n  }\n\n  componentWillUnmount() {\n    const {\n      onStop\n    } = this.props;\n    onStop();\n  }\n\n  render() {\n    const {\n      src,\n      recordedVideo,\n      recording,\n      modes,\n      supportsRecording,\n      videoSources,\n      showVideoSourceDropdown,\n      showRecordingLength,\n      onSubmit,\n      i18n,\n      mirror,\n      onSnapshot,\n      onStartRecording,\n      onStopRecording,\n      onDiscardRecordedVideo,\n      recordingLengthSeconds\n    } = this.props;\n    const hasRecordedVideo = !!recordedVideo;\n    const shouldShowRecordButton = !hasRecordedVideo && supportsRecording && (isModeAvailable(modes, 'video-only') || isModeAvailable(modes, 'audio-only') || isModeAvailable(modes, 'video-audio'));\n    const shouldShowSnapshotButton = !hasRecordedVideo && isModeAvailable(modes, 'picture');\n    const shouldShowRecordingLength = supportsRecording && showRecordingLength && !hasRecordedVideo;\n    const shouldShowVideoSourceDropdown = showVideoSourceDropdown && videoSources && videoSources.length > 1;\n    const videoProps = {\n      playsinline: true\n    };\n\n    if (recordedVideo) {\n      videoProps.muted = false;\n      videoProps.controls = true;\n      videoProps.src = recordedVideo; // reset srcObject in dom. If not resetted, stream sticks in element\n\n      if (this.videoElement) {\n        this.videoElement.srcObject = undefined;\n      }\n    } else {\n      videoProps.muted = true;\n      videoProps.autoplay = true;\n      videoProps.srcObject = src;\n    }\n\n    return h(\"div\", {\n      className: \"uppy uppy-Webcam-container\"\n    }, h(\"div\", {\n      className: \"uppy-Webcam-videoContainer\"\n    }, h(\"video\", _extends({\n      /* eslint-disable-next-line no-return-assign */\n      ref: videoElement => this.videoElement = videoElement,\n      className: `uppy-Webcam-video  ${mirror ? 'uppy-Webcam-video--mirrored' : ''}`\n      /* eslint-disable-next-line react/jsx-props-no-spreading */\n\n    }, videoProps))), h(\"div\", {\n      className: \"uppy-Webcam-footer\"\n    }, h(\"div\", {\n      className: \"uppy-Webcam-videoSourceContainer\"\n    }, shouldShowVideoSourceDropdown ? VideoSourceSelect(this.props) : null), h(\"div\", {\n      className: \"uppy-Webcam-buttonContainer\"\n    }, shouldShowSnapshotButton && h(SnapshotButton, {\n      onSnapshot: onSnapshot,\n      i18n: i18n\n    }), shouldShowRecordButton && h(RecordButton, {\n      recording: recording,\n      onStartRecording: onStartRecording,\n      onStopRecording: onStopRecording,\n      i18n: i18n\n    }), hasRecordedVideo && h(SubmitButton, {\n      onSubmit: onSubmit,\n      i18n: i18n\n    }), hasRecordedVideo && h(DiscardButton, {\n      onDiscard: onDiscardRecordedVideo,\n      i18n: i18n\n    })), h(\"div\", {\n      className: \"uppy-Webcam-recordingLength\"\n    }, shouldShowRecordingLength && h(RecordingLength, {\n      recordingLengthSeconds: recordingLengthSeconds,\n      i18n: i18n\n    }))));\n  }\n\n}\n\nexport default CameraScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module"}