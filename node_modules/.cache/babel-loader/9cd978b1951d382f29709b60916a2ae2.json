{"ast":null,"code":"import { h, Fragment } from 'preact';\nimport prettierBytes from '@transloadit/prettier-bytes';\nimport truncateString from '@uppy/utils/lib/truncateString';\nimport MetaErrorMessage from \"../MetaErrorMessage.js\";\nconst renderFileName = props => {\n  const {\n    author,\n    name\n  } = props.file.meta;\n  function getMaxNameLength() {\n    if (props.containerWidth <= 352) {\n      return 35;\n    }\n    if (props.containerWidth <= 576) {\n      return 60;\n    } // When `author` is present, we want to make sure\n    // the file name fits on one line so we can place\n    // the author on the second line.\n\n    return author ? 20 : 30;\n  }\n  return h(\"div\", {\n    className: \"uppy-Dashboard-Item-name\",\n    title: name\n  }, truncateString(name, getMaxNameLength()));\n};\nconst renderAuthor = props => {\n  const {\n    author\n  } = props.file.meta;\n  const {\n    providerName\n  } = props.file.remote;\n  const dot = `\\u00B7`;\n  if (!author) {\n    return null;\n  }\n  return h(\"div\", {\n    className: \"uppy-Dashboard-Item-author\"\n  }, h(\"a\", {\n    href: `${author.url}?utm_source=Companion&utm_medium=referral`,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, truncateString(author.name, 13)), providerName ? h(Fragment, null, ` ${dot} `, providerName, ` ${dot} `) : null);\n};\nconst renderFileSize = props => props.file.size && h(\"div\", {\n  className: \"uppy-Dashboard-Item-statusSize\"\n}, prettierBytes(props.file.size));\nconst ReSelectButton = props => props.file.isGhost && h(\"span\", null, ' \\u2022 ', h(\"button\", {\n  className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\",\n  type: \"button\",\n  onClick: props.toggleAddFilesPanel\n}, props.i18n('reSelect')));\nconst ErrorButton = _ref => {\n  let {\n    file,\n    onClick\n  } = _ref;\n  if (file.error) {\n    return h(\"button\", {\n      className: \"uppy-u-reset uppy-Dashboard-Item-errorDetails\",\n      \"aria-label\": file.error,\n      \"data-microtip-position\": \"bottom\",\n      \"data-microtip-size\": \"medium\",\n      onClick: onClick,\n      type: \"button\"\n    }, \"?\");\n  }\n  return null;\n};\nexport default function FileInfo(props) {\n  const {\n    file\n  } = props;\n  return h(\"div\", {\n    className: \"uppy-Dashboard-Item-fileInfo\",\n    \"data-uppy-file-source\": file.source\n  }, h(\"div\", {\n    className: \"uppy-Dashboard-Item-fileName\"\n  }, renderFileName(props), h(ErrorButton, {\n    file: props.file // eslint-disable-next-line no-alert\n    ,\n\n    onClick: () => alert(props.file.error) // TODO: move to a custom alert implementation\n  })), h(\"div\", {\n    className: \"uppy-Dashboard-Item-status\"\n  }, renderAuthor(props), renderFileSize(props), ReSelectButton(props)), h(MetaErrorMessage, {\n    file: props.file,\n    i18n: props.i18n,\n    toggleFileCard: props.toggleFileCard,\n    metaFields: props.metaFields\n  }));\n}","map":{"version":3,"names":["h","Fragment","prettierBytes","truncateString","MetaErrorMessage","renderFileName","props","author","name","file","meta","getMaxNameLength","containerWidth","className","title","renderAuthor","providerName","remote","dot","href","url","target","rel","renderFileSize","size","ReSelectButton","isGhost","type","onClick","toggleAddFilesPanel","i18n","ErrorButton","_ref","error","FileInfo","source","alert","toggleFileCard","metaFields"],"sources":["/lab/node_modules/@uppy/dashboard/lib/components/FileItem/FileInfo/index.js"],"sourcesContent":["import { h, Fragment } from 'preact';\nimport prettierBytes from '@transloadit/prettier-bytes';\nimport truncateString from '@uppy/utils/lib/truncateString';\nimport MetaErrorMessage from \"../MetaErrorMessage.js\";\n\nconst renderFileName = props => {\n  const {\n    author,\n    name\n  } = props.file.meta;\n\n  function getMaxNameLength() {\n    if (props.containerWidth <= 352) {\n      return 35;\n    }\n\n    if (props.containerWidth <= 576) {\n      return 60;\n    } // When `author` is present, we want to make sure\n    // the file name fits on one line so we can place\n    // the author on the second line.\n\n\n    return author ? 20 : 30;\n  }\n\n  return h(\"div\", {\n    className: \"uppy-Dashboard-Item-name\",\n    title: name\n  }, truncateString(name, getMaxNameLength()));\n};\n\nconst renderAuthor = props => {\n  const {\n    author\n  } = props.file.meta;\n  const {\n    providerName\n  } = props.file.remote;\n  const dot = `\\u00B7`;\n\n  if (!author) {\n    return null;\n  }\n\n  return h(\"div\", {\n    className: \"uppy-Dashboard-Item-author\"\n  }, h(\"a\", {\n    href: `${author.url}?utm_source=Companion&utm_medium=referral`,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, truncateString(author.name, 13)), providerName ? h(Fragment, null, ` ${dot} `, providerName, ` ${dot} `) : null);\n};\n\nconst renderFileSize = props => props.file.size && h(\"div\", {\n  className: \"uppy-Dashboard-Item-statusSize\"\n}, prettierBytes(props.file.size));\n\nconst ReSelectButton = props => props.file.isGhost && h(\"span\", null, ' \\u2022 ', h(\"button\", {\n  className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\",\n  type: \"button\",\n  onClick: props.toggleAddFilesPanel\n}, props.i18n('reSelect')));\n\nconst ErrorButton = _ref => {\n  let {\n    file,\n    onClick\n  } = _ref;\n\n  if (file.error) {\n    return h(\"button\", {\n      className: \"uppy-u-reset uppy-Dashboard-Item-errorDetails\",\n      \"aria-label\": file.error,\n      \"data-microtip-position\": \"bottom\",\n      \"data-microtip-size\": \"medium\",\n      onClick: onClick,\n      type: \"button\"\n    }, \"?\");\n  }\n\n  return null;\n};\n\nexport default function FileInfo(props) {\n  const {\n    file\n  } = props;\n  return h(\"div\", {\n    className: \"uppy-Dashboard-Item-fileInfo\",\n    \"data-uppy-file-source\": file.source\n  }, h(\"div\", {\n    className: \"uppy-Dashboard-Item-fileName\"\n  }, renderFileName(props), h(ErrorButton, {\n    file: props.file // eslint-disable-next-line no-alert\n    ,\n    onClick: () => alert(props.file.error) // TODO: move to a custom alert implementation\n\n  })), h(\"div\", {\n    className: \"uppy-Dashboard-Item-status\"\n  }, renderAuthor(props), renderFileSize(props), ReSelectButton(props)), h(MetaErrorMessage, {\n    file: props.file,\n    i18n: props.i18n,\n    toggleFileCard: props.toggleFileCard,\n    metaFields: props.metaFields\n  }));\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}