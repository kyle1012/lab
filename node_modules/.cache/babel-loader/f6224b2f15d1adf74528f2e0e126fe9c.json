{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nwindow.onpageshow = function (event) {\n  // 새로고침: window.performance.navigation.type == 1\n  // 뒤로가기: window.performance.navigation.type == 2\n  if (event.persisted || window.performance && (window.performance.navigation.type == 1 || window.performance.navigation.type == 2)) {\n    // 현재 브라우저에서 WebStorage를 지원할 때\n    if ('sessionStorage' in window && window['sessionStorage'] !== null) {\n      // sessionStorage로 데이터 다시 불러오기\n      if (sessionStorage.getItem('DATA')) {\n        input_text.value = sessionStorage.getItem('DATA');\n      }\n    }\n  }\n};\nexport default {\n  components: {},\n  data() {\n    //변수생성\n    return {\n      list: {},\n      //리스트 데이터\n      no: '',\n      //게시판 숫자처리\n      listData: [],\n      searchData: [],\n      search_length: '',\n      dataPerPage: 10,\n      curPageNum: 1,\n      search: '',\n      sort: '',\n      peo: '',\n      dep: '',\n      doc: ''\n    };\n  },\n  mounted() {\n    this.fnGetList();\n  },\n  methods: {\n    fnGetList() {\n      axios.get(\"http://10.1.30.202:5000/board\").then(res => {\n        this.list = res.data;\n        this.listData = res.data;\n        console.log(res.data);\n      }).catch(err => {\n        if (err.message.indexOf('Network Error') > -1) {\n          alert('네트워크가 원활하지 않습니다.\\n잠시 후 다시 시도해주세요.');\n        }\n      });\n    },\n    Reset() {\n      this.doc = '';\n      this.peo = '';\n      this.dep = '';\n      this.sort = '';\n    },\n    DBsearch() {\n      const url = 'http://10.1.30.202:5000/search';\n      const data = JSON.stringify({\n        db_doc: this.doc,\n        db_user: this.peo,\n        db_sort: this.sort,\n        db_dep: this.dep\n      });\n      axios.post(url, data, {\n        headers: {\n          \"Content-Type\": `application/json`\n        }\n      }).then(res => {\n        console.log(res.data);\n        var search_data = res.data;\n        this.listData = search_data;\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    fnView(index) {\n      if (index[1] == \"IP신청서\") {\n        this.$router.push({\n          path: './BoardDetail',\n          query: index\n        });\n      } else if (index[1] == \"인터넷차단해제신청서\") {\n        this.$router.push({\n          path: './BoardDetail_int',\n          query: index\n        });\n      } else if (index[1] == \"방화벽정책신청서\") {\n        this.$router.push({\n          path: './BoardDetail_firewall',\n          query: index\n        });\n      } else if (index[1] == \"계정신청서\") {\n        this.$router.push({\n          path: './BoardDetail_account',\n          query: index\n        });\n      }\n    },\n    preview(index) {\n      if (index[1] == \"IP신청서\") {\n        var ip_file_path = index[22];\n        var ip_file_name = ip_file_path.substr(11);\n        window.open(ip_file_name, '_blank');\n      } else if (index[1] == \"인터넷차단해제신청서\") {\n        var ip_file_path = index[22];\n        var ip_file_name = ip_file_path.substr(11);\n        window.open(ip_file_name, '_blank');\n      } else if (index[1] == \"방화벽정책신청서\") {\n        var ip_file_path = index[22];\n        var ip_file_name = ip_file_path.substr(11);\n        window.open(ip_file_name, '_blank');\n      } else if (index[1] == \"계정신청서\") {\n        var ip_file_path = index[22];\n        var ip_file_name = ip_file_path.substr(11);\n        window.open(ip_file_name, '_blank');\n      }\n    }\n  },\n  computed: {\n    startOffset() {\n      return (this.curPageNum - 1) * this.dataPerPage;\n    },\n    endOffset() {\n      return this.startOffset + this.dataPerPage;\n    },\n    numOfPages() {\n      return Math.ceil(this.searchData.length / this.dataPerPage);\n    },\n    callist() {\n      const searchWord = this.search.toLowerCase();\n      this.searchData = this.listData.filter(data => {\n        let flag = false;\n        data.forEach(data2 => {\n          if (data2 && data2.toString().toLowerCase().includes(searchWord)) {\n            flag = true;\n          }\n        });\n        return flag;\n      }).slice(0);\n      return this.searchData.slice(this.startOffset, this.endOffset);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","window","onpageshow","event","persisted","performance","navigation","type","sessionStorage","getItem","input_text","value","components","data","list","no","listData","searchData","search_length","dataPerPage","curPageNum","search","sort","peo","dep","doc","mounted","fnGetList","methods","get","then","res","console","log","catch","err","message","indexOf","alert","Reset","DBsearch","url","JSON","stringify","db_doc","db_user","db_sort","db_dep","post","headers","search_data","fnView","index","$router","push","path","query","preview","ip_file_path","ip_file_name","substr","open","computed","startOffset","endOffset","numOfPages","Math","ceil","length","callist","searchWord","toLowerCase","filter","flag","forEach","data2","toString","includes","slice"],"sourceRoot":"","sources":["/lab/src/components/BoardList.vue"],"sourcesContent":["<template>\n      <v-text-field label=\"Search Data...\"\n                    v-model=\"search\"\n                    >\n      </v-text-field>\n      <v-layout\n    >\n    <v-row>\n      <v-col cols=\"2.5\"><v-text-field label=\"분류\" v-model=\"sort\" placeholder=\"분류\" outlined></v-text-field></v-col>\n      <v-col cols=\"2.5\"><v-text-field label=\"기안자\" v-model=\"peo\" placeholder=\"기안자\" outlined></v-text-field></v-col>\n      <v-col cols=\"2.5\"><v-text-field label=\"부서\" v-model=\"dep\" placeholder=\"부서\" outlined></v-text-field></v-col>\n      <v-col cols=\"2.5\"><v-text-field label=\"기안번호\" v-model=\"doc\" placeholder=\"기안번호\" outlined></v-text-field></v-col>\n      <v-col cols=\"1\"><button type=\"button\" class=\"w3-button w3-round w3-blue-gray\" v-on:click=\"DBsearch\">검색</button></v-col>\n      <v-col cols=\"1\"><button type=\"button\" class=\"w3-button w3-round w3-gray\" v-on:click=\"Reset\">초기화</button></v-col>\n    </v-row>\n    </v-layout>\n  <div class=\"ui icon input\" style=\"width: 100%\">\n    <table class=\"w3-table-all\">\n      <thead>\n      <tr>  \n        <th>분류</th>\n        <th>구분</th>\n        <th>기안자</th>\n        <th>부서</th>\n        <th>기안일</th>\n        <th>기안번호</th>\n        <th>미리보기</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr v-for=\"(row, idx) in callist\" :key=\"idx\">\n          <td><a @click=\"fnView(row)\">{{ row[1] }}</a></td>\n          <td>{{ row[3] }}</td>\n          <td>{{ row[5] }}</td>\n          <td>{{ row[9] }}</td>\n          <td>{{ row[20] }}</td>\n          <td>{{ row[19] }}</td>\n          <td>    <v-icon\n      large\n      @click=\"preview(row)\"\n      color=\"orange darken-2\"\n    >\n      mdi-arrow-up-bold-box-outline\n    </v-icon></td>\n        </tr>\n      </tbody>\n    </table>\n    <v-pagination\n        v-model=\"curPageNum\"\n        :length=\"numOfPages\">\n      </v-pagination>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nwindow.onpageshow = function (event) {\n\n// 새로고침: window.performance.navigation.type == 1\n// 뒤로가기: window.performance.navigation.type == 2\nif (event.persisted || (window.performance && (window.performance.navigation.type == 1 || window.performance.navigation.type == 2))) {\n\n    // 현재 브라우저에서 WebStorage를 지원할 때\n    if (('sessionStorage' in window) && window['sessionStorage'] !== null) {\n    \n        // sessionStorage로 데이터 다시 불러오기\n        if (sessionStorage.getItem('DATA')) {\n            input_text.value = sessionStorage.getItem('DATA');\n        }\n        \n    }\n    \n}\n\n}\n\nexport default {\n  components: {\n  },\n  data() { //변수생성\n    return {\n      list: {}, //리스트 데이터\n      no: '', //게시판 숫자처리\n      listData: [],\n      searchData: [],\n      search_length : '',\n      dataPerPage: 10,\n      curPageNum: 1,\n      search: '',\n      sort: '',\n      peo: '',\n      dep: '',\n      doc: '',\n    }\n  },\n  mounted() {\n  this.fnGetList()\n},\n  methods: {\n      fnGetList() {\n      axios.get(\"http://10.1.30.202:5000/board\")\n      .then((res) => {      \n        this.list = res.data\n        this.listData = res.data\n        console.log(res.data)\n\n\n      }).catch((err) => {\n        if (err.message.indexOf('Network Error') > -1) {\n          alert('네트워크가 원활하지 않습니다.\\n잠시 후 다시 시도해주세요.')\n        }\n      })\n    },\n    Reset(){\n       this.doc = ''\n       this.peo = ''\n       this.dep = ''\n       this.sort = ''\n    },\n    DBsearch() {\n      const url = 'http://10.1.30.202:5000/search';\n      const data = JSON.stringify({\n        db_doc:this.doc,\n        db_user:this.peo,\n        db_sort:this.sort,\n        db_dep:this.dep,\n      })\n      axios.post(url, data, {\n        headers: {\n            \"Content-Type\": `application/json`,\n          },\n      })\n      .then((res) => {      \n          console.log(res.data)\n          var search_data = res.data\n          this.listData = search_data\n\n\n      }).catch((err) => {\n        console.log(err)\n      })\n    },\n    fnView(index) {\n          if(index[1] == \"IP신청서\"){\n\n          this.$router.push({\n          path: './BoardDetail',\n          query: index\n    })\n}\n      else if(index[1] == \"인터넷차단해제신청서\"){\n          this.$router.push({\n          path: './BoardDetail_int',\n          query: index\n    })\n      }\n      else if(index[1] == \"방화벽정책신청서\"){\n          this.$router.push({\n          path: './BoardDetail_firewall',\n          query: index\n    })\n      }\n      else if(index[1] == \"계정신청서\"){\n          this.$router.push({\n          path: './BoardDetail_account',\n          query: index\n    })\n      }\n  },\n   preview(index){\n          if(index[1] == \"IP신청서\"){\n            var ip_file_path = index[22]\n            var ip_file_name = ip_file_path.substr(11)\n            window.open(ip_file_name, '_blank')\n          }\n      else if(index[1] == \"인터넷차단해제신청서\"){\n            var ip_file_path = index[22]\n            var ip_file_name = ip_file_path.substr(11)\n            window.open(ip_file_name, '_blank')\n      }\n      else if(index[1] == \"방화벽정책신청서\"){\n            var ip_file_path = index[22]\n            var ip_file_name = ip_file_path.substr(11)\n            window.open(ip_file_name, '_blank')\n      }\n      else if(index[1] == \"계정신청서\"){\n            var ip_file_path = index[22]\n            var ip_file_name = ip_file_path.substr(11)\n            window.open(ip_file_name, '_blank')\n      }\n\n   }\n\n  },\n  computed:{\n    startOffset() {\n        return ((this.curPageNum - 1) * this.dataPerPage);\n      },\n      endOffset() {\n        return (this.startOffset + this.dataPerPage);\n      },\n      numOfPages() {\n        return Math.ceil(this.searchData.length / this.dataPerPage);\n      },\n      callist(){\n        const searchWord = this.search.toLowerCase();\n\nthis.searchData = this.listData.filter((data) => {\n  let flag = false;\n  \n    data.forEach((data2) => {\n        if (data2 && data2.toString().toLowerCase().includes(searchWord)) {\n      flag = true;\n    }\n    });\n\n    return flag;\n}).slice(0);\nreturn this.searchData.slice(this.startOffset, this.endOffset);\n      }\n    }\n    }\n</script>\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module"}