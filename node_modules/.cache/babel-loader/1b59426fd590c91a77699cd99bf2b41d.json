{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  components: {},\n  data() {\n    //변수생성\n    return {\n      list: {},\n      //리스트 데이터\n      no: '',\n      //게시판 숫자처리\n      listData: [],\n      searchData: [],\n      search_data: [],\n      dataPerPage: 10,\n      curPageNum: 1,\n      search: '',\n      sort: '',\n      peo: '',\n      dep: '',\n      doc: ''\n    };\n  },\n  mounted() {\n    this.fnGetList();\n  },\n  methods: {\n    fnGetList() {\n      axios.get(\"http://10.1.30.202:5000/board\").then(res => {\n        this.list = res.data;\n        this.listData = res.data;\n        console.log(res.data);\n      }).catch(err => {\n        if (err.message.indexOf('Network Error') > -1) {\n          alert('네트워크가 원활하지 않습니다.\\n잠시 후 다시 시도해주세요.');\n        }\n      });\n    },\n    Reset() {\n      this.sort = '';\n      this.dep = '';\n      this.peo = '';\n      this.doc = '';\n    },\n    DBsearch() {\n      const url = 'http://10.1.30.202:5000/search';\n      const data = JSON.stringify({\n        db_doc: this.doc,\n        db_user: this.peo,\n        db_sort: this.sort,\n        db_dep: this.dep\n      });\n      axios.post(url, data, {\n        headers: {\n          \"Content-Type\": `application/json`\n        }\n      }).then(function (response) {\n        console.log(response.data.length);\n        this.search_data = response.data;\n      }).catch(function (error) {\n        console.log(error);\n        alert(\"검색어가 존재하지 않습니다.\");\n      });\n    },\n    fnView(index) {\n      if (index[1] == \"IP신청서\") {\n        this.$router.push({\n          path: './BoardDetail',\n          query: index\n        });\n      } else if (index[1] == \"인터넷차단해제신청서\") {\n        this.$router.push({\n          path: './BoardDetail_int',\n          query: index\n        });\n      } else if (index[1] == \"방화벽정책신청서\") {\n        this.$router.push({\n          path: './BoardDetail_firewall',\n          query: index\n        });\n      } else if (index[1] == \"계정신청서\") {\n        this.$router.push({\n          path: './BoardDetail_account',\n          query: index\n        });\n      }\n    },\n    preview(index) {\n      if (index[1] == \"IP신청서\") {\n        var ip_file_path = index[22];\n        var ip_file_name = ip_file_path.substr(11);\n        window.open(ip_file_name, '_blank');\n      } else if (index[1] == \"인터넷차단해제신청서\") {\n        var ip_file_path = index[22];\n        var ip_file_name = ip_file_path.substr(11);\n        window.open(ip_file_name, '_blank');\n      } else if (index[1] == \"방화벽정책신청서\") {\n        var ip_file_path = index[22];\n        var ip_file_name = ip_file_path.substr(11);\n        window.open(ip_file_name, '_blank');\n      } else if (index[1] == \"계정신청서\") {\n        var ip_file_path = index[22];\n        var ip_file_name = ip_file_path.substr(11);\n        window.open(ip_file_name, '_blank');\n      }\n    }\n  },\n  computed: {\n    startOffset() {\n      return (this.curPageNum - 1) * this.dataPerPage;\n    },\n    endOffset() {\n      return this.startOffset + this.dataPerPage;\n    },\n    numOfPages() {\n      return Math.ceil(this.searchData.length / this.dataPerPage);\n    },\n    callist() {\n      if (this.search_data != []) {\n        const searchWord = this.search.toLowerCase();\n        this.searchData = this.listData.filter(data => {\n          let flag = false;\n          data.forEach(data2 => {\n            if (data2 && data2.toString().toLowerCase().includes(searchWord)) {\n              flag = true;\n            }\n          });\n          return flag;\n        }).slice(0);\n        return this.searchData.slice(this.startOffset, this.endOffset);\n      } else {\n        return this.search_data.slice(this.startOffset, this.endOffset);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","components","data","list","no","listData","searchData","search_data","dataPerPage","curPageNum","search","sort","peo","dep","doc","mounted","fnGetList","methods","get","then","res","console","log","catch","err","message","indexOf","alert","Reset","DBsearch","url","JSON","stringify","db_doc","db_user","db_sort","db_dep","post","headers","response","length","error","fnView","index","$router","push","path","query","preview","ip_file_path","ip_file_name","substr","window","open","computed","startOffset","endOffset","numOfPages","Math","ceil","callist","searchWord","toLowerCase","filter","flag","forEach","data2","toString","includes","slice"],"sourceRoot":"","sources":["/lab/src/components/BoardList.vue"],"sourcesContent":["<template>\n      <v-text-field label=\"Search Data...\"\n                    v-model=\"search\"\n                    >\n      </v-text-field>\n      <v-layout\n    >\n    <v-row>\n      <v-col cols=\"2.5\"><v-text-field label=\"분류\" v-model=\"sort\" placeholder=\"분류\" outlined></v-text-field></v-col>\n      <v-col cols=\"2.5\"><v-text-field label=\"기안자\" v-model=\"peo\" placeholder=\"기안자\" outlined></v-text-field></v-col>\n      <v-col cols=\"2.5\"><v-text-field label=\"부서\" v-model=\"dep\" placeholder=\"부서\" outlined></v-text-field></v-col>\n      <v-col cols=\"2.5\"><v-text-field label=\"기안번호\" v-model=\"doc\" placeholder=\"기안번호\" outlined></v-text-field></v-col>\n      <v-col cols=\"1\"><button type=\"button\" class=\"w3-button w3-round w3-blue-gray\" v-on:click=\"DBsearch\">검색</button></v-col>\n      <v-col cols=\"1\"><button type=\"button\" class=\"w3-button w3-round w3-gray\" v-on:click=\"Reset\">초기화</button></v-col>\n    </v-row>\n    </v-layout>\n  <div class=\"ui icon input\" style=\"width: 100%\">\n    <table class=\"w3-table-all\">\n      <thead>\n      <tr>  \n        <th>분류</th>\n        <th>구분</th>\n        <th>기안자</th>\n        <th>부서</th>\n        <th>기안일</th>\n        <th>기안번호</th>\n        <th>미리보기</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr v-for=\"(row, idx) in callist\" :key=\"idx\">\n          <td><a @click=\"fnView(row)\">{{ row[1] }}</a></td>\n          <td>{{ row[3] }}</td>\n          <td>{{ row[5] }}</td>\n          <td>{{ row[9] }}</td>\n          <td>{{ row[20] }}</td>\n          <td>{{ row[19] }}</td>\n          <td>    <v-icon\n      large\n      @click=\"preview(row)\"\n      color=\"orange darken-2\"\n    >\n      mdi-arrow-up-bold-box-outline\n    </v-icon></td>\n        </tr>\n      </tbody>\n    </table>\n    <v-pagination\n        v-model=\"curPageNum\"\n        :length=\"numOfPages\">\n      </v-pagination>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\n\nexport default {\n  components: {\n  },\n  data() { //변수생성\n    return {\n      list: {}, //리스트 데이터\n      no: '', //게시판 숫자처리\n      listData: [],\n      searchData: [],\n      search_data: [],\n      dataPerPage: 10,\n      curPageNum: 1,\n      search: '',\n      sort: '',\n      peo: '',\n      dep: '',\n      doc: '',\n    }\n  },\n  mounted() {\n  this.fnGetList()\n},\n  methods: {\n      fnGetList() {\n      axios.get(\"http://10.1.30.202:5000/board\")\n      .then((res) => {      \n        this.list = res.data\n        this.listData = res.data\n        console.log(res.data)\n\n\n      }).catch((err) => {\n        if (err.message.indexOf('Network Error') > -1) {\n          alert('네트워크가 원활하지 않습니다.\\n잠시 후 다시 시도해주세요.')\n        }\n      })\n    },\n    Reset(){\n       this.sort = ''\n       this.dep = ''\n       this.peo = ''\n       this.doc = ''\n    },\n    DBsearch() {\n      const url = 'http://10.1.30.202:5000/search';\n      const data = JSON.stringify({\n        db_doc:this.doc,\n        db_user:this.peo,\n        db_sort:this.sort,\n        db_dep:this.dep,\n      })\n      axios.post(url, data, {\n        headers: {\n            \"Content-Type\": `application/json`,\n          },\n      })\n      .then(function(response) {\n          console.log(response.data.length)\n          this.search_data = response.data\n        })\n        .catch(function(error) {\n          console.log(error);\n          alert(\"검색어가 존재하지 않습니다.\")\n        });\n    },\n    fnView(index) {\n          if(index[1] == \"IP신청서\"){\n\n          this.$router.push({\n          path: './BoardDetail',\n          query: index\n    })\n}\n      else if(index[1] == \"인터넷차단해제신청서\"){\n          this.$router.push({\n          path: './BoardDetail_int',\n          query: index\n    })\n      }\n      else if(index[1] == \"방화벽정책신청서\"){\n          this.$router.push({\n          path: './BoardDetail_firewall',\n          query: index\n    })\n      }\n      else if(index[1] == \"계정신청서\"){\n          this.$router.push({\n          path: './BoardDetail_account',\n          query: index\n    })\n      }\n  },\n   preview(index){\n          if(index[1] == \"IP신청서\"){\n            var ip_file_path = index[22]\n            var ip_file_name = ip_file_path.substr(11)\n            window.open(ip_file_name, '_blank')\n          }\n      else if(index[1] == \"인터넷차단해제신청서\"){\n            var ip_file_path = index[22]\n            var ip_file_name = ip_file_path.substr(11)\n            window.open(ip_file_name, '_blank')\n      }\n      else if(index[1] == \"방화벽정책신청서\"){\n            var ip_file_path = index[22]\n            var ip_file_name = ip_file_path.substr(11)\n            window.open(ip_file_name, '_blank')\n      }\n      else if(index[1] == \"계정신청서\"){\n            var ip_file_path = index[22]\n            var ip_file_name = ip_file_path.substr(11)\n            window.open(ip_file_name, '_blank')\n      }\n\n   }\n\n  },\n  computed:{\n    startOffset() {\n        return ((this.curPageNum - 1) * this.dataPerPage);\n      },\n      endOffset() {\n        return (this.startOffset + this.dataPerPage);\n      },\n      numOfPages() {\n        return Math.ceil(this.searchData.length / this.dataPerPage);\n      },\n      callist(){\n        if (this.search_data != []){\n        const searchWord = this.search.toLowerCase();\n\nthis.searchData = this.listData.filter((data) => {\n  let flag = false;\n  \n    data.forEach((data2) => {\n        if (data2 && data2.toString().toLowerCase().includes(searchWord)) {\n      flag = true;\n    }\n    });\n\n    return flag;\n}).slice(0);\nreturn this.searchData.slice(this.startOffset, this.endOffset);\n      }\n      else{return this.search_data.slice(this.startOffset, this.endOffset)}\n    }\n    }\n  }\n</script>\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module"}